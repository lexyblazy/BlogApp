<% layout('layout')%>
<div class = 'ui container'>
    <% posts.forEach(function(post){%>
        
            <div class = 'ui container main text segment'>
            <h2 class='header'><%=post.title.toUpperCase()%></h2>
            <small><%=post.date.toDateString()%></small>
            <img src='/uploads/<%=post.image%>' width='666' height='354.94'><br><br>
            <div><%-post.content.substr(0,200)%>...</div><br>
            <a href="/posts/<%=post.slug%>" class = 'ui purple inverted button'>Read More</a><br>
            <small class = 'ui floated right item'>Category: <a href = '/categories/<%=post.category.name%>'><%=post.category.name%></a></small>                                                                 
            <%if(post.author){%>
                <small class = 'ui floated right item'>Author: <a href = '/profile/<%=post.author._id%>'><%=post.author.name%></a></small>                                                                 
            <%}%>
            
        </div>   
    <%})%>

     <div class='ui container text segment '>
        <div class="ui pagination menu">
        <%if(page > 1){%>
            <a class="item" href='/posts/page/<%=parseFloat(page) - 1%>'>Prev</a>
        <%}%>
            

            <%for(var i = 1; i <= pages;i++){%>
                <%
                    let pageClass = '';
                    if(page == i){
                        pageClass='active'
                    }else{
                        pageClass = ''
                    }
                %>
                 <a href ='/posts/page/<%=i%>' class="item <%=pageClass%>"><%=i%></a>
            <%}%>
           
           
        <%if(page < pages){%>
             <a class="item" href='/posts/page/<%=parseFloat(page) + 1%>'>Next</a>
        <%}%>

        </div>
    </div>

</div>